<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #9ba2b1; -webkit-text-stroke: #9ba2b1; background-color: #242423}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #d65562; -webkit-text-stroke: #d65562; background-color: #242423}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #88b966; -webkit-text-stroke: #88b966; background-color: #242423}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #9ba2b1; -webkit-text-stroke: #9ba2b1; background-color: #242423; min-height: 16.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4a505d; -webkit-text-stroke: #4a505d; background-color: #242423}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #519deb; -webkit-text-stroke: #519deb; background-color: #242423}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c58853; -webkit-text-stroke: #c58853; background-color: #242423}
    span.s1 {font-kerning: none}
    span.s2 {font-kerning: none; color: #d65562; -webkit-text-stroke: 0px #d65562}
    span.s3 {font-kerning: none; color: #c58853; -webkit-text-stroke: 0px #c58853}
    span.s4 {font-kerning: none; color: #88b966; -webkit-text-stroke: 0px #88b966}
    span.s5 {font-kerning: none; color: #9ba2b1; -webkit-text-stroke: 0px #9ba2b1}
    span.s6 {font-kerning: none; color: #519deb; -webkit-text-stroke: 0px #519deb}
    span.s7 {font-kerning: none; color: #b85dd5; -webkit-text-stroke: 0px #b85dd5}
    span.s8 {font-kerning: none; color: #4a505d; -webkit-text-stroke: 0px #4a505d}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;</span><span class="s2">html </span><span class="s3">lang</span><span class="s1">="</span><span class="s4">en</span><span class="s1">"&gt;</span></p>
<p class="p2"><span class="s5">&lt;</span><span class="s1">head</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">meta </span><span class="s3">charset</span><span class="s1">="</span><span class="s4">utf-8</span><span class="s1">"</span><span class="s2"> </span><span class="s1">/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">title</span><span class="s1">&gt;Route Finder with Multiple Routes&lt;/</span><span class="s2">title</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">meta </span><span class="s3">name</span><span class="s5">="</span><span class="s1">viewport</span><span class="s5">"</span><span class="s2"> </span><span class="s3">content</span><span class="s5">="</span><span class="s1">width=device-width, initial-scale=1</span><span class="s5">"</span><span class="s2"> </span><span class="s5">/&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">style </span><span class="s3">type</span><span class="s5">="</span><span class="s1">text/css</span><span class="s5">"&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Modern Design System */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">:root</span><span class="s1"> {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Typography Scale */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--font-family</span><span class="s1">: -apple-system, BlinkMacSystemFont, </span><span class="s4">'SF Pro Display'</span><span class="s1">, </span><span class="s4">'Inter'</span><span class="s1">, system-ui, sans-serif;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-size-xs</span><span class="s5">: </span><span class="s3">12</span><span class="s5">px;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-size-sm</span><span class="s5">: </span><span class="s3">14</span><span class="s5">px;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-size-base</span><span class="s5">: </span><span class="s3">16</span><span class="s5">px;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-size-lg</span><span class="s5">: </span><span class="s3">20</span><span class="s5">px;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-size-xl</span><span class="s5">: </span><span class="s3">24</span><span class="s5">px;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Font Weights */</i><i></i></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-weight-normal</span><span class="s5">: </span><span class="s3">400</span><span class="s5">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-weight-medium</span><span class="s5">: </span><span class="s3">500</span><span class="s5">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--font-weight-semibold</span><span class="s5">: </span><span class="s3">600</span><span class="s5">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Spacing System (4px base) */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-1</span><span class="s1">: </span><span class="s3">4</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-2</span><span class="s1">: </span><span class="s3">8</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-3</span><span class="s1">: </span><span class="s3">12</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-4</span><span class="s1">: </span><span class="s3">16</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-5</span><span class="s1">: </span><span class="s3">20</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-6</span><span class="s1">: </span><span class="s3">24</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-8</span><span class="s1">: </span><span class="s3">32</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-10</span><span class="s1">: </span><span class="s3">40</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--space-12</span><span class="s1">: </span><span class="s3">48</span><span class="s1">px;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Color System */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--color-primary</span><span class="s1">: #007AFF;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-primary-hover</span><span class="s5">: #0056CC;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-secondary</span><span class="s5">: #5856D6;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--color-success</span><span class="s1">: #34C759;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--color-warning</span><span class="s1">: #FF9500;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--color-error</span><span class="s1">: #FF3B30;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-bg-primary</span><span class="s5">: #FFFFFF;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-bg-secondary</span><span class="s5">: #F2F2F7;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-bg-tertiary</span><span class="s5">: #FFFFFF;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-text-primary</span><span class="s5">: #000000;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-text-secondary</span><span class="s5">: #3C3C43;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-text-tertiary</span><span class="s5">: #8E8E93;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--color-border</span><span class="s1">: #C6C6C8;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">--color-border-light</span><span class="s5">: #E5E5EA;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Shadows */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--shadow-sm</span><span class="s1">: </span><span class="s3">0</span><span class="s1"> </span><span class="s3">1</span><span class="s1">px </span><span class="s3">3</span><span class="s1">px </span><span class="s6">rgba</span><span class="s1">(</span><span class="s3">0</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, </span><span class="s3">0.08</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--shadow-md</span><span class="s1">: </span><span class="s3">0</span><span class="s1"> </span><span class="s3">2</span><span class="s1">px </span><span class="s3">8</span><span class="s1">px </span><span class="s6">rgba</span><span class="s1">(</span><span class="s3">0</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, </span><span class="s3">0.1</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--shadow-lg</span><span class="s1">: </span><span class="s3">0</span><span class="s1"> </span><span class="s3">4</span><span class="s1">px </span><span class="s3">16</span><span class="s1">px </span><span class="s6">rgba</span><span class="s1">(</span><span class="s3">0</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, </span><span class="s3">0</span><span class="s1">, </span><span class="s3">0.12</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Border Radius */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--radius-sm</span><span class="s1">: </span><span class="s3">6</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--radius-md</span><span class="s1">: </span><span class="s3">8</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--radius-lg</span><span class="s1">: </span><span class="s3">12</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--radius-xl</span><span class="s1">: </span><span class="s3">16</span><span class="s1">px;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>/* Transitions */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--transition-fast</span><span class="s1">: </span><span class="s3">150</span><span class="s1">ms ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--transition-base</span><span class="s1">: </span><span class="s3">300</span><span class="s1">ms ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s6">--transition-slow</span><span class="s1">: </span><span class="s3">500</span><span class="s1">ms ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">*</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">box-sizing</span><span class="s1">: border-box;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">body</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">margin</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-family</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-family</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-base</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-normal</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">line-height</span><span class="s5">: </span><span class="s3">1.5</span><span class="s5">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-primary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">-webkit-font-smoothing</span><span class="s5">: antialiased;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">-moz-osx-font-smoothing</span><span class="s5">: grayscale;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">     </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">#map</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">bottom</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">100</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">     </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.sidebar</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: absolute;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">380</span><span class="s1">px;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">max-height</span><span class="s5">: </span><span class="s1">calc</span><span class="s5">(</span><span class="s3">100</span><span class="s5">vh </span><span class="s1">-</span><span class="s5"> </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-10</span><span class="s5">));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">overflow-y</span><span class="s1">: auto;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-lg</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-xl</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">z-index</span><span class="s1">: </span><span class="s3">1000</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s1">: transform </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-base</span><span class="s1">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.sidebar.hidden</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateX</span><span class="s1">(</span><span class="s3">-100</span><span class="s1">%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.toggle-btn</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: absolute;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-10</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-10</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-primary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">justify-content</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-lg</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">z-index</span><span class="s1">: </span><span class="s3">1001</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-md</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s5">: all </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-fast</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-secondary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.toggle-btn:hover</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-lg</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.toggle-btn.sidebar-hidden</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.toggle-btn.sidebar-visible</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s1">: </span><span class="s3">420</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Card System */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">.card</span><span class="s1"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-primary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-lg</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">overflow</span><span class="s1">: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s1">: box-shadow </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-fast</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card:hover</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-md</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-header</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">) </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-bottom</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-semibold</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-base</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">justify-content</span><span class="s1">: space-between;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">user-select</span><span class="s1">: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: sticky;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">z-index</span><span class="s1">: </span><span class="s3">10</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-header:hover</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #EBEBF0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-header .icon</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-tertiary</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-right</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-2</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-header .chevron</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-tertiary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s1">: transform </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-fast</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-header.collapsed .chevron</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">rotate</span><span class="s1">(</span><span class="s3">90</span><span class="s1">deg);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-content</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-content.collapsible</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">max-height</span><span class="s1">: </span><span class="s3">1000</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">overflow</span><span class="s1">: hidden;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s5">: max-height </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-base</span><span class="s5">), padding </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-base</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.card-content.collapsed</span><span class="s5"> {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">max-height</span><span class="s5">: </span><span class="s3">0</span><span class="s5">;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">padding-top</span><span class="s5">: </span><span class="s3">0</span><span class="s5">;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">padding-bottom</span><span class="s5">: </span><span class="s3">0</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Main Container */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.sidebar-container</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">flex-direction</span><span class="s1">: column;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Status Message */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.status-message</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-4</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-medium</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">1</span><span class="s1">px solid;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.status-loading</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #FFF4E6;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border-color</span><span class="s1">: #FFE4B3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: #8B5A00;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.status-success</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #F0FDF4;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border-color</span><span class="s1">: #BBF7D0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: #166534;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.status-error</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #FEF2F2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border-color</span><span class="s1">: #FECACA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: #991B1B;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Form Elements */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.form-group</span><span class="s5"> {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.form-group:last-child</span><span class="s5"> {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s3">0</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.form-label</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: block;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-medium</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-primary</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-2</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.form-input</span><span class="s5">,</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>.form-select</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">100</span><span class="s1">%;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">) </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">1</span><span class="s1">px solid </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--color-border</span><span class="s1">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-family</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-family</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-primary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s5">: border-color </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-fast</span><span class="s5">), box-shadow </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-fast</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.form-input:focus</span><span class="s5">,</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>.form-select:focus</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">outline</span><span class="s1">: none;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s1">: </span><span class="s3">0</span><span class="s1"> </span><span class="s3">0</span><span class="s1"> </span><span class="s3">0</span><span class="s1"> </span><span class="s3">3</span><span class="s1">px </span><span class="s6">rgba</span><span class="s1">(</span><span class="s3">0</span><span class="s1">, </span><span class="s3">122</span><span class="s1">, </span><span class="s3">255</span><span class="s1">, </span><span class="s3">0.1</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Button System */</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">.btn</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: inline-flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">justify-content</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">) </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: none;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-medium</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-family</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-family</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: pointer;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s5">: all </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-fast</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">text-decoration</span><span class="s5">: none;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn-primary</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn-primary:hover</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-primary-hover</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateY</span><span class="s1">(</span><span class="s3">-1</span><span class="s1">px);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-md</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn-secondary</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">1</span><span class="s1">px solid </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--color-border</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn-secondary:hover</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #EBEBF0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateY</span><span class="s1">(</span><span class="s3">-1</span><span class="s1">px);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--shadow-sm</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn-small</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">) </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn-full</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">100</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.btn:disabled</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">opacity</span><span class="s1">: </span><span class="s3">0.6</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: not-allowed;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">transform</span><span class="s5">: none </span><span class="s1">!important</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Route Controls */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-controls</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin-top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-controls input[type="color"]</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-8</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-8</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">1</span><span class="s1">px solid </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--color-border</span><span class="s1">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-sm</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-controls input[type="number"]</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">80</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Route Tabs */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tabs</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">flex-wrap</span><span class="s1">: wrap;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-4</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">padding-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-4</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-bottom</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tab</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">) </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">1</span><span class="s1">px solid </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--color-border</span><span class="s1">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: pointer;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-medium</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s5">: all </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--transition-fast</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">min-width</span><span class="s1">: </span><span class="s3">80</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">justify-content</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tab:hover</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #EBEBF0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateY</span><span class="s1">(</span><span class="s3">-1</span><span class="s1">px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tab.active</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: white;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tab .color-indicator</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">border-radius</span><span class="s5">: </span><span class="s3">50</span><span class="s5">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">1</span><span class="s1">px solid </span><span class="s6">rgba</span><span class="s1">(</span><span class="s3">0</span><span class="s1">,</span><span class="s3">0</span><span class="s1">,</span><span class="s3">0</span><span class="s1">,</span><span class="s3">0.2</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tab .close-btn</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background</span><span class="s1">: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: inherit;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor</span><span class="s1">: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-semibold</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">border-radius</span><span class="s5">: </span><span class="s3">50</span><span class="s5">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">justify-content</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s1">: background-color </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-fast</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-tab .close-btn:hover</span><span class="s5"> {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">background-color</span><span class="s5">: </span><span class="s6">rgba</span><span class="s5">(</span><span class="s3">255</span><span class="s5">,</span><span class="s3">255</span><span class="s5">,</span><span class="s3">255</span><span class="s5">,</span><span class="s3">0.2</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Waypoint List */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-list</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">max-height</span><span class="s1">: </span><span class="s3">200</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">overflow-y</span><span class="s1">: auto;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin-top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-item</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-bottom</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-primary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-1</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-sm</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-item:last-child</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border-bottom</span><span class="s1">: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-number</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-6</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-6</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">border-radius</span><span class="s5">: </span><span class="s3">50</span><span class="s5">%;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-primary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s1">: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">justify-content</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-semibold</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-right</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-3</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">flex-shrink</span><span class="s5">: </span><span class="s3">0</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-text</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">flex</span><span class="s1">: </span><span class="s3">1</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-secondary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">overflow</span><span class="s1">: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">text-overflow</span><span class="s1">: ellipsis;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">white-space</span><span class="s1">: nowrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-controls</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">flex-shrink</span><span class="s5">: </span><span class="s3">0</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.waypoint-controls button</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-6</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-6</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-sm</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Route List */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-list</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">max-height</span><span class="s1">: </span><span class="s3">300</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">overflow-y</span><span class="s1">: auto;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-md</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin-top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-list-item</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">align-items</span><span class="s1">: center;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-bottom</span><span class="s5">: </span><span class="s3">1</span><span class="s5">px solid </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-border-light</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-primary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-1</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-sm</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transition</span><span class="s1">: background-color </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-fast</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-list-item:hover</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-bg-secondary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-list-item:last-child</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border-bottom</span><span class="s1">: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-info</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">flex</span><span class="s1">: </span><span class="s3">1</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-name</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-semibold</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-primary</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-1</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.route-status</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-tertiary</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-xs</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.visibility-btn</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-8</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-8</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">padding</span><span class="s1">: </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-sm</span><span class="s5">);</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-right</span><span class="s5">: </span><span class="s6">var</span><span class="s5">(</span><span class="s6">--space-2</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">border-radius</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--radius-sm</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.visibility-btn.hidden</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--color-text-tertiary</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Map Controls */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.zoom-controls</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin-top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-4</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.zoom-controls button</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-10</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-size</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-size-lg</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-weight</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--font-weight-semibold</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Crosshair */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.map-crosshair</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">50</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s1">: </span><span class="s3">50</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translate</span><span class="s1">(</span><span class="s3">-50</span><span class="s1">%, </span><span class="s3">-50</span><span class="s1">%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">30</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s1">: </span><span class="s3">30</span><span class="s1">px;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">pointer-events</span><span class="s5">: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">z-index</span><span class="s1">: </span><span class="s3">1000</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.map-crosshair::before</span><span class="s5">,</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>.map-crosshair::after</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">content</span><span class="s1">: </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #ff0000;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s1">: </span><span class="s3">0</span><span class="s1"> </span><span class="s3">0</span><span class="s1"> </span><span class="s3">0</span><span class="s1"> </span><span class="s3">1</span><span class="s1">px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.map-crosshair::before</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">50</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">right</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateY</span><span class="s1">(</span><span class="s3">-50</span><span class="s1">%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.map-crosshair::after</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s1">: </span><span class="s3">50</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">bottom</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateX</span><span class="s1">(</span><span class="s3">-50</span><span class="s1">%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.map-crosshair .center-circle</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">position</span><span class="s1">: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top</span><span class="s1">: </span><span class="s3">50</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">left</span><span class="s1">: </span><span class="s3">50</span><span class="s1">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translate</span><span class="s1">(</span><span class="s3">-50</span><span class="s1">%, </span><span class="s3">-50</span><span class="s1">%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">width</span><span class="s1">: </span><span class="s3">8</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">height</span><span class="s1">: </span><span class="s3">8</span><span class="s1">px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border</span><span class="s1">: </span><span class="s3">2</span><span class="s1">px solid #ff0000;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">border-radius</span><span class="s5">: </span><span class="s3">50</span><span class="s5">%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">background-color</span><span class="s1">: #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">box-shadow</span><span class="s1">: </span><span class="s3">0</span><span class="s1"> </span><span class="s3">0</span><span class="s1"> </span><span class="s3">0</span><span class="s1"> </span><span class="s3">1</span><span class="s1">px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Button Grid */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.button-grid</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: grid;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">grid-template-columns</span><span class="s5">: </span><span class="s3">1</span><span class="s5">fr </span><span class="s3">1</span><span class="s5">fr;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin-top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.button-row</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">display</span><span class="s1">: flex;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">gap</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-2</span><span class="s5">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">margin-top</span><span class="s5">: </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-3</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Responsive Design */</i><i></i></span></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">@media </span><span class="s5">(</span><span class="s2">max-width</span><span class="s5">:</span><span class="s1"> 768px</span><span class="s5">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">.sidebar</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">width</span><span class="s1">: </span><span class="s6">calc</span><span class="s1">(</span><span class="s3">100</span><span class="s1">vw </span><span class="s6">-</span><span class="s1"> </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--space-10</span><span class="s1">));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">margin</span><span class="s1">: </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--space-3</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">      </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">.toggle-btn.sidebar-visible</span><span class="s5"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s2">left</span><span class="s5">: </span><span class="s1">calc</span><span class="s5">(</span><span class="s3">100</span><span class="s5">vw </span><span class="s1">-</span><span class="s5"> </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-5</span><span class="s5">) </span><span class="s1">-</span><span class="s5"> </span><span class="s1">var</span><span class="s5">(</span><span class="s1">--space-10</span><span class="s5">));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>/* Animation Classes */</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.fade-in</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">animation</span><span class="s1">: fadeIn </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-base</span><span class="s1">) ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">@keyframes fadeIn</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">from</span><span class="s1"> { </span><span class="s2">opacity</span><span class="s1">: </span><span class="s3">0</span><span class="s1">; </span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateY</span><span class="s1">(</span><span class="s3">10</span><span class="s1">px); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">to</span><span class="s1"> { </span><span class="s2">opacity</span><span class="s1">: </span><span class="s3">1</span><span class="s1">; </span><span class="s2">transform</span><span class="s1">: </span><span class="s6">translateY</span><span class="s1">(</span><span class="s3">0</span><span class="s1">); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.slide-down</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">animation</span><span class="s1">: slideDown </span><span class="s6">var</span><span class="s1">(</span><span class="s6">--transition-base</span><span class="s1">) ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">@keyframes slideDown</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">from</span><span class="s1"> { </span><span class="s2">max-height</span><span class="s1">: </span><span class="s3">0</span><span class="s1">; </span><span class="s2">opacity</span><span class="s1">: </span><span class="s3">0</span><span class="s1">; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">to</span><span class="s1"> { </span><span class="s2">max-height</span><span class="s1">: </span><span class="s3">1000</span><span class="s1">px; </span><span class="s2">opacity</span><span class="s1">: </span><span class="s3">1</span><span class="s1">; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/</span><span class="s2">style</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s5">&lt;/</span><span class="s1">head</span><span class="s5">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s5">&lt;</span><span class="s1">body</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">div </span><span class="s3">id</span><span class="s1">="</span><span class="s4">map</span><span class="s1">"&gt;&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1"><i>&lt;!-- Map crosshair indicator --&gt;</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">div </span><span class="s3">id</span><span class="s5">="</span><span class="s1">map-crosshair</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">map-crosshair</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">center-circle</span><span class="s5">"&gt;&lt;/</span><span class="s2">div</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">toggle-btn sidebar-visible</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">toggle-btn</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.ui.toggleSidebar()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>☰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">sidebar</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">sidebar</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">sidebar-container</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;</span><span class="s2">div </span><span class="s3">id</span><span class="s5">="</span><span class="s1">status-message</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">status-message status-loading</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">strong</span><span class="s1">&gt;🔄 Initializing...&lt;/</span><span class="s2">strong</span><span class="s1">&gt;&lt;</span><span class="s2">br</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>Loading mapping application...</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>&lt;!-- Route Management Section --&gt;</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">route-management</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card-header</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.ui.toggleSection('route-management')</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: flex; align-items: center;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">icon</span><span class="s1">"&gt;⚬&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span</span><span class="s1">&gt;Route Management&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">chevron</span><span class="s1">"&gt;▷&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card-content collapsible</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">route-management-content</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">route-tabs</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">route-tabs</span><span class="s5">"&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>&lt;!-- Route tabs will be dynamically generated --&gt;</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-primary btn-full</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.routes.createNewRoute()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span</span><span class="s1">&gt;+&lt;/</span><span class="s2">span</span><span class="s1">&gt; New Route</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">button-grid</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">margin-top: var(--space-4);</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.fileManager.exportRoutes()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">span</span><span class="s1">&gt;↑&lt;/</span><span class="s2">span</span><span class="s1">&gt; Export</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.fileManager.triggerImportRoutes()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">span</span><span class="s1">&gt;↓&lt;/</span><span class="s2">span</span><span class="s1">&gt; Import</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>&lt;!-- Hidden file input for importing --&gt;</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">file</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">import-file-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">accept</span><span class="s5">="</span><span class="s1">.json</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onchange</span><span class="s5">="</span><span class="s1">RouteFinderApp.fileManager.importRoutes(event)</span><span class="s5">"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">route-list</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">route-list</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>&lt;!-- Route list items will be dynamically generated --&gt;</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary btn-full</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.ui.toggleRouteList()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">route-list-toggle</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none; margin-top: var(--space-3);</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>⋯ Show All Routes</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>&lt;!-- Current Route Controls --&gt;</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">current-route-panel</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card-header</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.ui.toggleSection('current-route')</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: flex; align-items: center;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">icon</span><span class="s1">"&gt;○&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span </span><span class="s3">id</span><span class="s1">="</span><span class="s4">current-route-header</span><span class="s1">"&gt;Current Route&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">chevron</span><span class="s1">"&gt;▷&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card-content collapsible</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">current-route-content</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-group</span><span class="s1">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-label</span><span class="s1">"&gt;Starting Point&lt;/</span><span class="s2">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">text</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">origin-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">placeholder</span><span class="s5">="</span><span class="s1">Enter address or place name</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary btn-full</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.geocoding.geocodeOrigin()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">margin-top: var(--space-2);</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>◎ Find Location</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-group</span><span class="s1">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-label</span><span class="s1">"&gt;Destination&lt;/</span><span class="s2">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">text</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">destination-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">placeholder</span><span class="s5">="</span><span class="s1">Enter address or place name</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary btn-full</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.geocoding.geocodeDestination()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">margin-top: var(--space-2);</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>◎ Find Location</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-group</span><span class="s1">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-label</span><span class="s1">"&gt;Waypoints&lt;/</span><span class="s2">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">text</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">waypoint-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">placeholder</span><span class="s5">="</span><span class="s1">Enter intermediate stop</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">button-grid</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.waypoints.addWaypoint()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>+ Add</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.waypoints.toggleWaypointMode()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">waypoint-mode-btn</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>◉ Click Map</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">div </span><span class="s3">id</span><span class="s5">="</span><span class="s1">waypoint-list</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">waypoint-list</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s1"><i>&lt;!-- Waypoints will be added here dynamically --&gt;</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-group</span><span class="s1">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-label</span><span class="s1">"&gt;Travel Mode&lt;/</span><span class="s2">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">select </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-select</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">profile-select</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s1">="</span><span class="s4">driving</span><span class="s1">"&gt;Car&lt;/</span><span class="s2">option</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s1">="</span><span class="s4">walking</span><span class="s1">"&gt;Walk&lt;/</span><span class="s2">option</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s1">="</span><span class="s4">cycling</span><span class="s1">"&gt;Bike&lt;/</span><span class="s2">option</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">select</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">button-row</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-primary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.routing.findRoute()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">flex: 2;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>→ Find Route</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.routes.clearCurrentRoute()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">flex: 1;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>✕ Clear</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">route-controls</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">style</span><span class="s5">="</span><span class="s1">font-size: var(--font-size-xs); color: var(--color-text-secondary);</span><span class="s5">"&gt;Color:&lt;/</span><span class="s2">label</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">color</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">routeColor</span><span class="s5">"</span><span class="s2"> </span><span class="s3">value</span><span class="s5">="</span><span class="s1">#ff0000</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onchange</span><span class="s5">="</span><span class="s1">RouteFinderApp.routes.updateCurrentRouteStyle()</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">style</span><span class="s5">="</span><span class="s1">font-size: var(--font-size-xs); color: var(--color-text-secondary);</span><span class="s5">"&gt;Width:&lt;/</span><span class="s2">label</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">number</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">routeWidth</span><span class="s5">"</span><span class="s2"> </span><span class="s3">value</span><span class="s5">="</span><span class="s1">8</span><span class="s5">"</span><span class="s2"> </span><span class="s3">min</span><span class="s5">="</span><span class="s1">1</span><span class="s5">"</span><span class="s2"> </span><span class="s3">max</span><span class="s5">="</span><span class="s1">20</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onchange</span><span class="s5">="</span><span class="s1">RouteFinderApp.routes.updateCurrentRouteStyle()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>&lt;!-- Map Controls --&gt;</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">map-controls</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: none;</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card-header</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.ui.toggleSection('map-controls')</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: flex; align-items: center;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">icon</span><span class="s1">"&gt;◈&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span</span><span class="s1">&gt;Map Controls&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">chevron</span><span class="s1">"&gt;▷&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card-content collapsible</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">map-controls-content</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-group</span><span class="s1">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-label</span><span class="s1">"&gt;Map Style&lt;/</span><span class="s2">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">select </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-select</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">map-style-select</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onchange</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.changeMapStyle()</span><span class="s5">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxnnmex53n1b14m07t6sum48</span><span class="s5">"&gt;Classic Standard&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxnmjiti0rvm14pby8w9si99</span><span class="s5">"&gt;Classic Vintage&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxov33jj3le314ueu15gl6yh</span><span class="s5">"&gt;Dark Digital&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxmhuc4k2gxm14s0eq1htzns</span><span class="s5">"&gt;Dark Monochrome&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxs1bfov2cay14mnx6nvrzxt</span><span class="s5">"&gt;Dark Night Mode&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckwgtu6ly20cr15qiy9i2ftsz</span><span class="s5">"&gt;Light Engraved&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxntkwjq4flv14ld7uisp5b1</span><span class="s5">"&gt;Light High Contrast&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxouv50s02lw14r2jiyvnvxh</span><span class="s5">"&gt;Light Pencil Sketch&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxtl08qj2gb215p8y2blzxur</span><span class="s5">"&gt;Pastel Blue&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxtkuk8l10zj14pk8irf7owt</span><span class="s5">"&gt;Pastel Cool&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxtl2a2s0yot14nw9pbn2733</span><span class="s5">"&gt;Pastel Pink&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxtl35nk4hsb15mry8rwlg4l</span><span class="s5">"&gt;Pastel Yellow&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxmjckme2if514s0v3xq4vxy</span><span class="s5">"&gt;Satellite Streets&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxrnuq691z6h14mnuy5jpk5c</span><span class="s5">"&gt;Topography Colorful&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxnp39kb5eyw14oaan01mkp0</span><span class="s5">"&gt;Topography Globe&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxnkf6rs60r214uc0j42vbj4</span><span class="s5">"&gt;Topography Outdoor&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxnqwyww0sri14p9skglgshs</span><span class="s5">"&gt;Topography Subtle&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxno9jbk3nn714s6vjah6fwb</span><span class="s5">"&gt;Topography Vintage&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxrrtfqk0oir15my0y9tpjvj</span><span class="s5">"&gt;Unique Colorful&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxovchyg4tfj14s6d7u559tj</span><span class="s5">"&gt;Unique Comic Book 1&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxov6vgm66g214o064dp3vda</span><span class="s5">"&gt;Unique Comic Book 2&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxove5sy174l15mq6h82hwxk</span><span class="s5">"&gt;Unique Dusty Western&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxoup98z4sv514m0q988ltie</span><span class="s5">"&gt;Unique Picture Book&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxov1ris0n2415p4e9gn8oxu</span><span class="s5">"&gt;Unique Treasure Map&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">option </span><span class="s3">value</span><span class="s5">="</span><span class="s1">mapbox://styles/cb29/ckxous4km02k114m523qh0k9y</span><span class="s5">"&gt;Unique Woodcut&lt;/</span><span class="s2">option</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">select</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-group</span><span class="s1">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">label </span><span class="s3">class</span><span class="s1">="</span><span class="s4">form-label</span><span class="s1">"&gt;Center Map On&lt;/</span><span class="s2">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">input </span><span class="s3">type</span><span class="s5">="</span><span class="s1">text</span><span class="s5">"</span><span class="s2"> </span><span class="s3">class</span><span class="s5">="</span><span class="s1">form-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">center-input</span><span class="s5">"</span><span class="s2"> </span><span class="s3">placeholder</span><span class="s5">="</span><span class="s1">Enter address or coordinates</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">button-grid</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.centerMapOnLocation()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>◎ Center</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.toggleCenterMode()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">center-mode-btn</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>◉ Click Map</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">button-grid</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.toggleCrosshair()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">crosshair-toggle</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>⊕ Show Center</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.getCurrentCenter()</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>⧉ Get Center</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">zoom-controls</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.zoomIn()</span><span class="s5">"&gt;+&lt;/</span><span class="s2">button</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.zoomOut()</span><span class="s5">"&gt;-&lt;/</span><span class="s2">button</span><span class="s5">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-secondary</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.mapControls.fitToData()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">style</span><span class="s5">="</span><span class="s1">flex: 1; font-size: var(--font-size-sm);</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>⬚ Fit to Routes</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>&lt;!-- Initialization Controls --&gt;</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s5">="</span><span class="s1">card</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">init-controls</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">card-header</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">div </span><span class="s3">style</span><span class="s5">="</span><span class="s1">display: flex; align-items: center;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span </span><span class="s3">class</span><span class="s1">="</span><span class="s4">icon</span><span class="s1">"&gt;◯&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s2">span</span><span class="s1">&gt;Initialize Application&lt;/</span><span class="s2">span</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;</span><span class="s2">div </span><span class="s3">class</span><span class="s1">="</span><span class="s4">card-content</span><span class="s1">"&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">button </span><span class="s3">class</span><span class="s5">="</span><span class="s1">btn btn-primary btn-full</span><span class="s5">"</span><span class="s2"> </span><span class="s3">onclick</span><span class="s5">="</span><span class="s1">RouteFinderApp.init()</span><span class="s5">"</span><span class="s2"> </span><span class="s3">id</span><span class="s5">="</span><span class="s1">init-app-btn</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>→ Start Route Finder</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s2">p </span><span class="s3">style</span><span class="s5">="</span><span class="s1">font-size: var(--font-size-xs); color: var(--color-text-tertiary); margin: var(--space-3) 0 0 0; text-align: center;</span><span class="s5">"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>This will load the mapping libraries and start the full application.</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;/</span><span class="s2">p</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/</span><span class="s2">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span>&lt;</span><span class="s1">script</span><span class="s5">&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>// Main Application Object with Modular Architecture</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">const</span><span class="s1"> RouteFinderApp </span><span class="s6">=</span><span class="s1"> (</span><span class="s7">function</span><span class="s1">() {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">'use strict'</span><span class="s5">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Configuration Object - Centralized Settings</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> Config </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Map Configuration</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">mapbox</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s2">accessToken</span><span class="s6">:</span><span class="s5"> </span><span class="s1">'pk.eyJ1IjoiY2IyOSIsImEiOiJja3E4OHo3anowZGx1Mm9tcXF3ZmhyaWtwIn0.IQ5rY622AU9GOETrqa9NBw'</span><span class="s5">,</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s2">style</span><span class="s6">:</span><span class="s5"> </span><span class="s1">'mapbox://styles/cb29/ckxnnmex53n1b14m07t6sum48'</span><span class="s5">, </span><span class="s8"><i>// Classic Standard as default</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">center</span><span class="s6">:</span><span class="s1"> [</span><span class="s6">-</span><span class="s3">84.5</span><span class="s1">, </span><span class="s3">38.05</span><span class="s1">],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">zoom</span><span class="s6">:</span><span class="s1"> </span><span class="s3">10</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Route Configuration</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">routes</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s2">colors</span><span class="s6">:</span><span class="s5"> [</span><span class="s1">'#ff0000'</span><span class="s5">, </span><span class="s1">'#00ff00'</span><span class="s5">, </span><span class="s1">'#0066ff'</span><span class="s5">, </span><span class="s1">'#ff6600'</span><span class="s5">, </span><span class="s1">'#ff00ff'</span><span class="s5">, </span><span class="s1">'#00ffff'</span><span class="s5">, </span><span class="s1">'#ffff00'</span><span class="s5">, </span><span class="s1">'#990000'</span><span class="s5">, </span><span class="s1">'#009900'</span><span class="s5">, </span><span class="s1">'#000099'</span><span class="s5">],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">defaultWidth</span><span class="s6">:</span><span class="s1"> </span><span class="s3">8</span><span class="s1">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">defaultProfile</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'driving'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// UI Configuration</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">ui</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">sidebarTransitionDuration</span><span class="s6">:</span><span class="s5"> </span><span class="s3">300</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">statusMessageDuration</span><span class="s6">:</span><span class="s5"> </span><span class="s3">5000</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Timing Configuration</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">timing</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">mapLoadDelay</span><span class="s6">:</span><span class="s1"> </span><span class="s3">1000</span><span class="s1">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">libraryLoadTimeout</span><span class="s6">:</span><span class="s5"> </span><span class="s3">30000</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">geocodingDelay</span><span class="s6">:</span><span class="s5"> </span><span class="s3">500</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Event System - Centralized Event Management</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> EventSystem </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">events</span><span class="s6">:</span><span class="s1"> {},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">on</span><span class="s1">(event, callback) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s7">this</span><span class="s1">.events[event]) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s1">.events[event] </span><span class="s6">=</span><span class="s1"> [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.events[event].</span><span class="s6">push</span><span class="s1">(callback);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">off</span><span class="s1">(event, callback) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s7">this</span><span class="s1">.events[event]) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.events[event] </span><span class="s6">=</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.events[event].</span><span class="s6">filter</span><span class="s1">(cb </span><span class="s6">=&gt;</span><span class="s1"> cb </span><span class="s6">!==</span><span class="s1"> callback);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">emit</span><span class="s1">(event, data) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s7">this</span><span class="s1">.events[event]) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.events[event].</span><span class="s6">forEach</span><span class="s1">(callback </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">try</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">callback</span><span class="s1">(data);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s7">catch</span><span class="s1"> (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Event callback error:'</span><span class="s1">, error);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Application State - Centralized State Management</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> State </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Core state</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">map</span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span><span class="s1">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">appInitialized</span><span class="s6">:</span><span class="s5"> </span><span class="s3">false</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">librariesLoaded</span><span class="s6">:</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">mapbox</span><span class="s6">:</span><span class="s1"> </span><span class="s3">false</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">turf</span><span class="s6">:</span><span class="s1"> </span><span class="s3">false</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Route state</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">routes</span><span class="s6">:</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">Map</span><span class="s1">(),</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">currentRouteId</span><span class="s6">:</span><span class="s5"> </span><span class="s7">null</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">nextRouteId</span><span class="s6">:</span><span class="s5"> </span><span class="s3">1</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">routeListVisible</span><span class="s6">:</span><span class="s5"> </span><span class="s3">false</span><span class="s5">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Interaction state</i><i></i></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">interactions</span><span class="s6">:</span><span class="s5"> {</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">settingOrigin</span><span class="s6">:</span><span class="s5"> </span><span class="s3">true</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">addingWaypoint</span><span class="s6">:</span><span class="s5"> </span><span class="s3">false</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">settingMapCenter</span><span class="s6">:</span><span class="s5"> </span><span class="s3">false</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">crosshairVisible</span><span class="s6">:</span><span class="s5"> </span><span class="s3">false</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// UI state</i><i></i></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">collapsedSections</span><span class="s6">:</span><span class="s5"> </span><span class="s7">new</span><span class="s5"> </span><span class="s3">Set</span><span class="s5">(),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Getters</i><i></i></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">getCurrentRoute</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.routes.</span><span class="s6">get</span><span class="s1">(</span><span class="s7">this</span><span class="s1">.currentRouteId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">getAllRoutes</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> </span><span class="s3">Array</span><span class="s1">.</span><span class="s7">from</span><span class="s1">(</span><span class="s7">this</span><span class="s1">.routes.</span><span class="s6">values</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Utility Functions</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> Utils </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">updateStatus</span><span class="s1">(message, type) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> statusEl </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'status-message'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (statusEl) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>statusEl.className </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'status-message status-'</span><span class="s1"> </span><span class="s6">+</span><span class="s1"> type;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>statusEl.innerHTML </span><span class="s6">=</span><span class="s1"> message;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">log</span><span class="s1">(</span><span class="s4">'STATUS: '</span><span class="s1"> </span><span class="s6">+</span><span class="s1"> message);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'statusUpdated'</span><span class="s1">, { message, type });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">createEmptyRoute</span><span class="s5">(id </span><span class="s1">=</span><span class="s5"> </span><span class="s7">null</span><span class="s5">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> routeId </span><span class="s6">=</span><span class="s1"> id </span><span class="s6">||</span><span class="s1"> State.nextRouteId</span><span class="s6">++</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> routeId,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">name</span><span class="s6">:</span><span class="s1"> `</span><span class="s4">Route </span><span class="s1">${routeId}`,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">origin</span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">destination</span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">waypoints</span><span class="s6">:</span><span class="s1"> [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">profile</span><span class="s6">:</span><span class="s1"> Config.routes.defaultProfile,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color</span><span class="s6">:</span><span class="s1"> Config.routes.colors[(routeId </span><span class="s6">-</span><span class="s1"> </span><span class="s3">1</span><span class="s1">) </span><span class="s6">%</span><span class="s1"> Config.routes.colors.length],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width</span><span class="s6">:</span><span class="s1"> Config.routes.defaultWidth,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">routeData</span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">visible</span><span class="s6">:</span><span class="s1"> </span><span class="s3">true</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">status</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'empty'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">formatCoordinates</span><span class="s1">(coords, precision </span><span class="s6">=</span><span class="s1"> </span><span class="s3">4</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> `${coords[1].toFixed(precision)}</span><span class="s4">, </span><span class="s1">${coords[0].toFixed(precision)}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Map Management Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> MapManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">init</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">State.librariesLoaded.mapbox </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.librariesLoaded.turf) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s7">throw</span><span class="s5"> </span><span class="s7">new</span><span class="s5"> </span><span class="s3">Error</span><span class="s5">(</span><span class="s1">'Required libraries not loaded'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🗺️ Initializing Map...&lt;/strong&gt;&lt;br&gt;Creating map instance...'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>mapboxgl.accessToken </span><span class="s6">=</span><span class="s1"> Config.mapbox.accessToken;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map </span><span class="s6">=</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">mapboxgl</span><span class="s1">.</span><span class="s3">Map</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">container</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'map'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">style</span><span class="s6">:</span><span class="s1"> Config.mapbox.style,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">center</span><span class="s6">:</span><span class="s1"> Config.mapbox.center,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">zoom</span><span class="s6">:</span><span class="s1"> Config.mapbox.zoom</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'load'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">console</span><span class="s5">.</span><span class="s6">log</span><span class="s5">(</span><span class="s1">'Map loaded successfully'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">setupMapFeatures</span><span class="s1">();</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s5">.</span><span class="s1">setupEventHandlers</span><span class="s5">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'mapLoaded'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'error'</span><span class="s1">, (e) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Map error:'</span><span class="s1">, e);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Map Error&lt;/strong&gt;&lt;br&gt;Failed to initialize map'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'mapError'</span><span class="s1">, e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">setupMapFeatures</span><span class="s5">() {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Add obstacles</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> obstacle </span><span class="s6">=</span><span class="s1"> turf.</span><span class="s6">buffer</span><span class="s1">(</span><span class="s7">this</span><span class="s1">.</span><span class="s6">getClearanceData</span><span class="s1">(), </span><span class="s3">0.25</span><span class="s1">, { </span><span class="s2">units</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'kilometers'</span><span class="s1"> });</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">addSource</span><span class="s1">(</span><span class="s4">'obstacles'</span><span class="s1">, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'geojson'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">data</span><span class="s6">:</span><span class="s1"> obstacle</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">addLayer</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'obstacles'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'fill'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">source</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'obstacles'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">paint</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'fill-color'</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'#ff0000'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'fill-opacity'</span><span class="s6">:</span><span class="s1"> </span><span class="s3">0.3</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s3">console</span><span class="s5">.</span><span class="s6">log</span><span class="s5">(</span><span class="s1">'Map features setup complete'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">setupEventHandlers</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'click'</span><span class="s1">, (e) </span><span class="s6">=&gt;</span><span class="s1"> EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'mapClicked'</span><span class="s1">, e));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">getClearanceData</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s5"> </span><span class="s1">'FeatureCollection'</span><span class="s5">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">features</span><span class="s6">:</span><span class="s1"> [</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.47426</span><span class="s5">, </span><span class="s3">38.06673</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"13' 2\""</span><span class="s5"> } },</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.47208</span><span class="s5">, </span><span class="s3">38.06694</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"13' 7\""</span><span class="s5"> } },</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.60485</span><span class="s5">, </span><span class="s3">38.12184</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"13' 7\""</span><span class="s5"> } },</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.61905</span><span class="s5">, </span><span class="s3">37.87504</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"12' 0\""</span><span class="s5"> } },</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.55946</span><span class="s5">, </span><span class="s3">38.30213</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"13' 6\""</span><span class="s5"> } },</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.27235</span><span class="s5">, </span><span class="s3">38.04954</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"13' 6\""</span><span class="s5"> } },</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span>{ </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Feature'</span><span class="s5">, </span><span class="s1">geometry</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">type</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'Point'</span><span class="s5">, </span><span class="s1">coordinates</span><span class="s6">:</span><span class="s5"> [</span><span class="s6">-</span><span class="s3">84.27264</span><span class="s5">, </span><span class="s3">37.82917</span><span class="s5">] }, </span><span class="s1">properties</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">clearance</span><span class="s6">:</span><span class="s5"> </span><span class="s4">"11' 6\""</span><span class="s5"> } }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>]</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Route Management Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> RouteManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">createNewRoute</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> newRoute </span><span class="s6">=</span><span class="s1"> Utils.</span><span class="s6">createEmptyRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.routes.</span><span class="s6">set</span><span class="s1">(newRoute.id, newRoute);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">addRouteToMap</span><span class="s1">(newRoute.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">switchToRoute</span><span class="s1">(newRoute.id);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeCreated'</span><span class="s1">, newRoute);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routesUpdated'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">log</span><span class="s1">(`</span><span class="s4">Created new route </span><span class="s1">${newRoute.id}`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">addRouteToMap</span><span class="s1">(routeId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.routes.</span><span class="s6">get</span><span class="s1">(routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.map) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Add route line source and layer</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">addSource</span><span class="s1">(`</span><span class="s4">route-</span><span class="s1">${routeId}`, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'geojson'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">data</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'FeatureCollection'</span><span class="s1">, </span><span class="s2">features</span><span class="s6">:</span><span class="s1"> [] }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">addLayer</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> `</span><span class="s4">route-</span><span class="s1">${routeId}`,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'line'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">source</span><span class="s6">:</span><span class="s1"> `</span><span class="s4">route-</span><span class="s1">${routeId}`,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">layout</span><span class="s6">:</span><span class="s5"> { </span><span class="s1">'line-join'</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'round'</span><span class="s5">, </span><span class="s1">'line-cap'</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'round'</span><span class="s5"> },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">paint</span><span class="s6">:</span><span class="s1"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'line-color'</span><span class="s6">:</span><span class="s1"> route.color,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'line-width'</span><span class="s6">:</span><span class="s1"> route.width,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'line-opacity'</span><span class="s6">:</span><span class="s1"> route.visible </span><span class="s6">?</span><span class="s1"> </span><span class="s3">1</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s3">0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Add waypoints source and layer</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">addSource</span><span class="s1">(`</span><span class="s4">waypoints-</span><span class="s1">${routeId}`, {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'geojson'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">data</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'FeatureCollection'</span><span class="s1">, </span><span class="s2">features</span><span class="s6">:</span><span class="s1"> [] }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">addLayer</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> `</span><span class="s4">waypoints-</span><span class="s1">${routeId}`,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'circle'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">source</span><span class="s6">:</span><span class="s1"> `</span><span class="s4">waypoints-</span><span class="s1">${routeId}`,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">paint</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'circle-radius'</span><span class="s6">:</span><span class="s1"> </span><span class="s3">6</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'circle-color'</span><span class="s6">:</span><span class="s1"> [</span><span class="s4">'get'</span><span class="s1">, </span><span class="s4">'color'</span><span class="s1">],</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s1">'circle-stroke-color'</span><span class="s6">:</span><span class="s5"> </span><span class="s4">'#ffffff'</span><span class="s5">,</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s1">'circle-stroke-width'</span><span class="s6">:</span><span class="s5"> </span><span class="s3">2</span><span class="s5">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'circle-opacity'</span><span class="s6">:</span><span class="s1"> route.visible </span><span class="s6">?</span><span class="s1"> </span><span class="s3">1</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s3">0</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">'circle-stroke-opacity'</span><span class="s6">:</span><span class="s1"> route.visible </span><span class="s6">?</span><span class="s1"> </span><span class="s3">1</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s3">0</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">switchToRoute</span><span class="s1">(routeId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.currentRouteId </span><span class="s6">=</span><span class="s1"> routeId;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.routes.</span><span class="s6">get</span><span class="s1">(routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Update UI</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'origin-input'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> route.origin </span><span class="s6">?</span><span class="s1"> Utils.</span><span class="s6">formatCoordinates</span><span class="s1">(route.origin) </span><span class="s6">:</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'destination-input'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> route.destination </span><span class="s6">?</span><span class="s1"> Utils.</span><span class="s6">formatCoordinates</span><span class="s1">(route.destination) </span><span class="s6">:</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'profile-select'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> route.profile;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'routeColor'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> route.color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'routeWidth'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> route.width;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'current-route-header'</span><span class="s1">).textContent </span><span class="s6">=</span><span class="s1"> `</span><span class="s4">🎯 </span><span class="s1">${route.name}`;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeSwitched'</span><span class="s1">, route);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'waypointsUpdated'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">updateRouteOnMap</span><span class="s1">(routeId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.routes.</span><span class="s6">get</span><span class="s1">(routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.map) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Update route line</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> routeFeatures </span><span class="s6">=</span><span class="s1"> [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (route.routeData) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>routeFeatures.</span><span class="s6">push</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Feature'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">geometry</span><span class="s6">:</span><span class="s1"> route.routeData.geometry</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">getSource</span><span class="s1">(`</span><span class="s4">route-</span><span class="s1">${routeId}`).</span><span class="s6">setData</span><span class="s1">({</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s5"> </span><span class="s1">'FeatureCollection'</span><span class="s5">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">features</span><span class="s6">:</span><span class="s1"> routeFeatures</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Update waypoints</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> waypointFeatures </span><span class="s6">=</span><span class="s1"> [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">let</span><span class="s1"> featureId </span><span class="s6">=</span><span class="s1"> </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (route.origin) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>waypointFeatures.</span><span class="s6">push</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Feature'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> featureId</span><span class="s6">++</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">geometry</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Point'</span><span class="s1">, </span><span class="s2">coordinates</span><span class="s6">:</span><span class="s1"> route.origin },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">properties</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">color</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'#00ff00'</span><span class="s1">, </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'origin'</span><span class="s1"> }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.waypoints.</span><span class="s6">forEach</span><span class="s1">((waypoint, index) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>waypointFeatures.</span><span class="s6">push</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Feature'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> featureId</span><span class="s6">++</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">geometry</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Point'</span><span class="s1">, </span><span class="s2">coordinates</span><span class="s6">:</span><span class="s1"> waypoint },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">properties</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">color</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'#0066ff'</span><span class="s1">, </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'waypoint'</span><span class="s1">, </span><span class="s2">index</span><span class="s6">:</span><span class="s1"> index }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (route.destination) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>waypointFeatures.</span><span class="s6">push</span><span class="s1">({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Feature'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> featureId</span><span class="s6">++</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">geometry</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'Point'</span><span class="s1">, </span><span class="s2">coordinates</span><span class="s6">:</span><span class="s1"> route.destination },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">properties</span><span class="s6">:</span><span class="s1"> { </span><span class="s2">color</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'#ff0000'</span><span class="s1">, </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'destination'</span><span class="s1"> }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">getSource</span><span class="s1">(`</span><span class="s4">waypoints-</span><span class="s1">${routeId}`).</span><span class="s6">setData</span><span class="s1">({</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">type</span><span class="s6">:</span><span class="s5"> </span><span class="s1">'FeatureCollection'</span><span class="s5">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">features</span><span class="s6">:</span><span class="s1"> waypointFeatures</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">deleteRoute</span><span class="s1">(routeId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.routes.size </span><span class="s6">&lt;=</span><span class="s1"> </span><span class="s3">1</span><span class="s1">) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Cannot Delete&lt;/strong&gt;&lt;br&gt;Must have at least one route'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Remove from map</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>[</span><span class="s4">'route'</span><span class="s1">, </span><span class="s4">'waypoints'</span><span class="s1">].</span><span class="s6">forEach</span><span class="s1">(type </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> layerId </span><span class="s6">=</span><span class="s1"> `${type}</span><span class="s4">-</span><span class="s1">${routeId}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (State.map.</span><span class="s6">getLayer</span><span class="s1">(layerId)) State.map.</span><span class="s6">removeLayer</span><span class="s1">(layerId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (State.map.</span><span class="s6">getSource</span><span class="s1">(layerId)) State.map.</span><span class="s6">removeSource</span><span class="s1">(layerId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.routes.</span><span class="s6">delete</span><span class="s1">(routeId);</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Switch to another route if we deleted the current one</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.currentRouteId </span><span class="s6">===</span><span class="s1"> routeId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> remainingRoutes </span><span class="s6">=</span><span class="s1"> </span><span class="s3">Array</span><span class="s1">.</span><span class="s7">from</span><span class="s1">(State.routes.</span><span class="s6">keys</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">switchToRoute</span><span class="s1">(remainingRoutes[</span><span class="s3">0</span><span class="s1">]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeDeleted'</span><span class="s1">, routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routesUpdated'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">clearCurrentRoute</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.origin </span><span class="s6">=</span><span class="s1"> </span><span class="s7">null</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.destination </span><span class="s6">=</span><span class="s1"> </span><span class="s7">null</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.waypoints </span><span class="s6">=</span><span class="s1"> [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.routeData </span><span class="s6">=</span><span class="s1"> </span><span class="s7">null</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.status </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'empty'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'origin-input'</span><span class="s5">).value </span><span class="s1">=</span><span class="s5"> </span><span class="s4">''</span><span class="s5">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'destination-input'</span><span class="s5">).value </span><span class="s1">=</span><span class="s5"> </span><span class="s4">''</span><span class="s5">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'waypoint-input'</span><span class="s5">).value </span><span class="s1">=</span><span class="s5"> </span><span class="s4">''</span><span class="s5">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeCleared'</span><span class="s1">, route);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'waypointsUpdated'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🗑️ Route Cleared&lt;/strong&gt;&lt;br&gt;All data removed from current route'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">updateCurrentRouteStyle</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.color </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'routeColor'</span><span class="s1">).value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.width </span><span class="s6">=</span><span class="s1"> </span><span class="s6">parseInt</span><span class="s1">(</span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'routeWidth'</span><span class="s1">).value);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.map.</span><span class="s6">getLayer</span><span class="s1">(`</span><span class="s4">route-</span><span class="s1">${State.currentRouteId}`)) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.map.</span><span class="s6">setPaintProperty</span><span class="s1">(`</span><span class="s4">route-</span><span class="s1">${State.currentRouteId}`, </span><span class="s4">'line-color'</span><span class="s1">, route.color);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.map.</span><span class="s6">setPaintProperty</span><span class="s1">(`</span><span class="s4">route-</span><span class="s1">${State.currentRouteId}`, </span><span class="s4">'line-width'</span><span class="s1">, route.width);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeStyleUpdated'</span><span class="s1">, route);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">toggleRouteVisibility</span><span class="s5">(routeId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.routes.</span><span class="s6">get</span><span class="s1">(routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.visible </span><span class="s6">=</span><span class="s1"> </span><span class="s6">!</span><span class="s1">route.visible;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>[</span><span class="s4">'route'</span><span class="s1">, </span><span class="s4">'waypoints'</span><span class="s1">].</span><span class="s6">forEach</span><span class="s1">(type </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> layerId </span><span class="s6">=</span><span class="s1"> `${type}</span><span class="s4">-</span><span class="s1">${routeId}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (State.map.</span><span class="s6">getLayer</span><span class="s1">(layerId)) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">const</span><span class="s1"> opacityProperty </span><span class="s6">=</span><span class="s1"> type </span><span class="s6">===</span><span class="s1"> </span><span class="s4">'route'</span><span class="s1"> </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'line-opacity'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'circle-opacity'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">const</span><span class="s1"> strokeOpacityProperty </span><span class="s6">=</span><span class="s1"> type </span><span class="s6">===</span><span class="s1"> </span><span class="s4">'waypoints'</span><span class="s1"> </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'circle-stroke-opacity'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.map.</span><span class="s6">setPaintProperty</span><span class="s1">(layerId, opacityProperty, route.visible </span><span class="s6">?</span><span class="s1"> </span><span class="s3">1</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s3">0</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">if</span><span class="s1"> (strokeOpacityProperty) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>State.map.</span><span class="s6">setPaintProperty</span><span class="s1">(layerId, strokeOpacityProperty, route.visible </span><span class="s6">?</span><span class="s1"> </span><span class="s3">1</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s3">0</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeVisibilityToggled'</span><span class="s1">, route);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Geocoding Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> GeocodingManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">geocodeOrigin</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> address </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'origin-input'</span><span class="s1">).value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">address.</span><span class="s6">trim</span><span class="s1">()) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">geocodeAddress</span><span class="s1">(address, (coords) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (route) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>route.origin </span><span class="s6">=</span><span class="s1"> coords;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'origin-input'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> Utils.</span><span class="s6">formatCoordinates</span><span class="s1">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;✅ Origin Found&lt;/strong&gt;&lt;br&gt;Location geocoded successfully'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'originSet'</span><span class="s1">, coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">geocodeDestination</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> address </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'destination-input'</span><span class="s1">).value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">address.</span><span class="s6">trim</span><span class="s1">()) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">geocodeAddress</span><span class="s1">(address, (coords) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (route) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>route.destination </span><span class="s6">=</span><span class="s1"> coords;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'destination-input'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> Utils.</span><span class="s6">formatCoordinates</span><span class="s1">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;✅ Destination Found&lt;/strong&gt;&lt;br&gt;Location geocoded successfully'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'destinationSet'</span><span class="s1">, coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">geocodeAddress</span><span class="s1">(address, callback) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> url </span><span class="s6">=</span><span class="s1"> `</span><span class="s4">https://api.mapbox.com/geocoding/v5/mapbox.places/</span><span class="s1">${encodeURIComponent(address)}</span><span class="s4">.json?access_token=</span><span class="s1">${mapboxgl.accessToken}`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">fetch</span><span class="s1">(url)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.</span><span class="s6">then</span><span class="s1">(response </span><span class="s6">=&gt;</span><span class="s1"> response.</span><span class="s6">json</span><span class="s1">())</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.</span><span class="s6">then</span><span class="s1">(data </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">if</span><span class="s1"> (data.features </span><span class="s6">&amp;&amp;</span><span class="s1"> data.features.length </span><span class="s6">&gt;</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s6">callback</span><span class="s1">(data.features[</span><span class="s3">0</span><span class="s1">].center);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Location Not Found&lt;/strong&gt;&lt;br&gt;Could not geocode the address'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.</span><span class="s7">catch</span><span class="s1">(error </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Geocoding error:'</span><span class="s1">, error);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Geocoding Error&lt;/strong&gt;&lt;br&gt;Failed to find location'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Waypoint Management Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> WaypointManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">addWaypoint</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> address </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'waypoint-input'</span><span class="s1">).value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">address.</span><span class="s6">trim</span><span class="s1">()) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>GeocodingManager.</span><span class="s6">geocodeAddress</span><span class="s1">(address, (coords) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s5">.</span><span class="s1">addWaypointAtCoordinates</span><span class="s5">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'waypoint-input'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">addWaypointAtCoordinates</span><span class="s5">(coords) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.waypoints.</span><span class="s6">push</span><span class="s1">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'waypointAdded'</span><span class="s1">, coords);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;✅ Waypoint Added&lt;/strong&gt;&lt;br&gt;Intermediate stop added to route'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">removeWaypoint</span><span class="s1">(index) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> removed </span><span class="s6">=</span><span class="s1"> route.waypoints.</span><span class="s6">splice</span><span class="s1">(index, </span><span class="s3">1</span><span class="s1">)[</span><span class="s3">0</span><span class="s1">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (route.routeData) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>route.routeData </span><span class="s6">=</span><span class="s1"> </span><span class="s7">null</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'waypointRemoved'</span><span class="s1">, { index, </span><span class="s2">waypoint</span><span class="s6">:</span><span class="s1"> removed });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">toggleWaypointMode</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.interactions.addingWaypoint </span><span class="s6">=</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.interactions.addingWaypoint;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s5"> btn </span><span class="s1">=</span><span class="s5"> </span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'waypoint-mode-btn'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>btn.textContent </span><span class="s6">=</span><span class="s1"> State.interactions.addingWaypoint </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'🛑 Stop Adding'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'📍 Click Map'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>btn.className </span><span class="s6">=</span><span class="s1"> State.interactions.addingWaypoint </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'btn btn-secondary'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'btn btn-secondary'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.interactions.addingWaypoint) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;📍 Waypoint Mode&lt;/strong&gt;&lt;br&gt;Click on map to add waypoints'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🎉 Ready!&lt;/strong&gt;&lt;br&gt;Multi-route mapper is ready to use'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'waypointModeToggled'</span><span class="s1">, State.interactions.addingWaypoint);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Routing Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> RoutingManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">findRoute</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">route.origin </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">route.destination) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Missing Data&lt;/strong&gt;&lt;br&gt;Need both origin and destination'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🔍 Finding Route...&lt;/strong&gt;&lt;br&gt;Calculating best path'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">let</span><span class="s1"> coordinates </span><span class="s6">=</span><span class="s1"> [route.origin];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>coordinates </span><span class="s6">=</span><span class="s1"> coordinates.</span><span class="s6">concat</span><span class="s1">(route.waypoints);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>coordinates.</span><span class="s6">push</span><span class="s1">(route.destination);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> coordsString </span><span class="s6">=</span><span class="s1"> coordinates.</span><span class="s6">map</span><span class="s1">(coord </span><span class="s6">=&gt;</span><span class="s1"> `${coord[0]}</span><span class="s4">,</span><span class="s1">${coord[1]}`).</span><span class="s6">join</span><span class="s1">(</span><span class="s4">';'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> profile </span><span class="s6">=</span><span class="s1"> route.profile;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s5"> url </span><span class="s6">=</span><span class="s5"> `</span><span class="s1">https://api.mapbox.com/directions/v5/mapbox/</span><span class="s5">${profile}</span><span class="s1">/</span><span class="s5">${coordsString}</span><span class="s1">?geometries=geojson&amp;access_token=</span><span class="s5">${mapboxgl.accessToken}`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">fetch</span><span class="s1">(url)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.</span><span class="s6">then</span><span class="s1">(response </span><span class="s6">=&gt;</span><span class="s1"> response.</span><span class="s6">json</span><span class="s1">())</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.</span><span class="s6">then</span><span class="s1">(data </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">if</span><span class="s1"> (data.routes </span><span class="s6">&amp;&amp;</span><span class="s1"> data.routes.length </span><span class="s6">&gt;</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>route.routeData </span><span class="s6">=</span><span class="s1"> data.routes[</span><span class="s3">0</span><span class="s1">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>route.status </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'calculated'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> duration </span><span class="s6">=</span><span class="s1"> </span><span class="s3">Math</span><span class="s1">.</span><span class="s6">round</span><span class="s1">(route.routeData.duration </span><span class="s6">/</span><span class="s1"> </span><span class="s3">60</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> distance </span><span class="s6">=</span><span class="s1"> (route.routeData.distance </span><span class="s6">/</span><span class="s1"> </span><span class="s3">1000</span><span class="s1">).</span><span class="s6">toFixed</span><span class="s1">(</span><span class="s3">1</span><span class="s1">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;✅ Route Found!&lt;/strong&gt;&lt;br&gt;</span><span class="s5">${duration}</span><span class="s1"> minutes, </span><span class="s5">${distance}</span><span class="s1"> km</span><span class="s5">`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routeCalculated'</span><span class="s1">, route);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ No Route Found&lt;/strong&gt;&lt;br&gt;Could not calculate route'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.</span><span class="s7">catch</span><span class="s1">(error </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Routing error:'</span><span class="s1">, error);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Routing Error&lt;/strong&gt;&lt;br&gt;Failed to calculate route'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Map Controls Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> MapControlsManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">zoomIn</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.map) State.map.</span><span class="s6">zoomIn</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">zoomOut</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.map) State.map.</span><span class="s6">zoomOut</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">fitToData</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">State.map) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> coordinates </span><span class="s6">=</span><span class="s1"> [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.routes.</span><span class="s6">forEach</span><span class="s1">(route </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (route.visible </span><span class="s6">&amp;&amp;</span><span class="s1"> route.routeData) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>coordinates.</span><span class="s6">push</span><span class="s1">(</span><span class="s6">...</span><span class="s1">route.routeData.geometry.coordinates);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (coordinates.length </span><span class="s6">===</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;ℹ️ No Data&lt;/strong&gt;&lt;br&gt;No visible routes to fit to'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> bounds </span><span class="s6">=</span><span class="s1"> coordinates.</span><span class="s6">reduce</span><span class="s1">((bounds, coord) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1"> bounds.</span><span class="s6">extend</span><span class="s1">(coord);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}, </span><span class="s7">new</span><span class="s1"> </span><span class="s3">mapboxgl</span><span class="s1">.</span><span class="s3">LngLatBounds</span><span class="s1">(coordinates[</span><span class="s3">0</span><span class="s1">], coordinates[</span><span class="s3">0</span><span class="s1">]));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">fitBounds</span><span class="s1">(bounds, { </span><span class="s2">padding</span><span class="s6">:</span><span class="s1"> </span><span class="s3">50</span><span class="s1"> });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">toggleCrosshair</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.interactions.crosshairVisible </span><span class="s6">=</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.interactions.crosshairVisible;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> crosshair </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'map-crosshair'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> toggleBtn </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'crosshair-toggle'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>crosshair.style.display </span><span class="s6">=</span><span class="s1"> State.interactions.crosshairVisible </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'none'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>toggleBtn.textContent </span><span class="s6">=</span><span class="s1"> State.interactions.crosshairVisible </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'🎯 Hide Center'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'🎯 Show Center'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">centerMapOnLocation</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> input </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'center-input'</span><span class="s1">).value.</span><span class="s6">trim</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">input) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ No Input&lt;/strong&gt;&lt;br&gt;Please enter an address or coordinates'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s5"> coordMatch </span><span class="s6">=</span><span class="s5"> input.</span><span class="s6">match</span><span class="s5">(</span><span class="s1">/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (coordMatch) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> lat </span><span class="s6">=</span><span class="s1"> </span><span class="s6">parseFloat</span><span class="s1">(coordMatch[</span><span class="s3">1</span><span class="s1">]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> lng </span><span class="s6">=</span><span class="s1"> </span><span class="s6">parseFloat</span><span class="s1">(coordMatch[</span><span class="s3">2</span><span class="s1">]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (lat </span><span class="s6">&gt;=</span><span class="s1"> </span><span class="s6">-</span><span class="s3">90</span><span class="s1"> </span><span class="s6">&amp;&amp;</span><span class="s1"> lat </span><span class="s6">&lt;=</span><span class="s1"> </span><span class="s3">90</span><span class="s1"> </span><span class="s6">&amp;&amp;</span><span class="s1"> lng </span><span class="s6">&gt;=</span><span class="s1"> </span><span class="s6">-</span><span class="s3">180</span><span class="s1"> </span><span class="s6">&amp;&amp;</span><span class="s1"> lng </span><span class="s6">&lt;=</span><span class="s1"> </span><span class="s3">180</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.map.</span><span class="s6">flyTo</span><span class="s1">({ </span><span class="s2">center</span><span class="s6">:</span><span class="s1"> [lng, lat], </span><span class="s2">zoom</span><span class="s6">:</span><span class="s1"> </span><span class="s3">14</span><span class="s1">, </span><span class="s2">duration</span><span class="s6">:</span><span class="s1"> </span><span class="s3">2000</span><span class="s1"> });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s1">(`</span><span class="s4">&lt;strong&gt;📍 Map Centered&lt;/strong&gt;&lt;br&gt;Coordinates: </span><span class="s1">${lat.toFixed(4)}</span><span class="s4">, </span><span class="s1">${lng.toFixed(4)}`, </span><span class="s4">'success'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🔍 Finding Location...&lt;/strong&gt;&lt;br&gt;Searching for address'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>GeocodingManager.</span><span class="s6">geocodeAddress</span><span class="s1">(input, (coords) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.map.</span><span class="s6">flyTo</span><span class="s1">({ </span><span class="s2">center</span><span class="s6">:</span><span class="s1"> coords, </span><span class="s2">zoom</span><span class="s6">:</span><span class="s1"> </span><span class="s3">14</span><span class="s1">, </span><span class="s2">duration</span><span class="s6">:</span><span class="s1"> </span><span class="s3">2000</span><span class="s1"> });</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;📍 Map Centered&lt;/strong&gt;&lt;br&gt;Location found and centered</span><span class="s5">`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">toggleCenterMode</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.interactions.settingMapCenter </span><span class="s6">=</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.interactions.settingMapCenter;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s5"> btn </span><span class="s1">=</span><span class="s5"> </span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'center-mode-btn'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>btn.textContent </span><span class="s6">=</span><span class="s1"> State.interactions.settingMapCenter </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'🛑 Stop Mode'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'📍 Click Map'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.interactions.settingMapCenter) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;📍 Center Mode&lt;/strong&gt;&lt;br&gt;Click on map to center at that location'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🎉 Ready!&lt;/strong&gt;&lt;br&gt;Multi-route mapper is ready to use'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">getCurrentCenter</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">State.map) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> center </span><span class="s6">=</span><span class="s1"> State.map.</span><span class="s6">getCenter</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> centerText </span><span class="s6">=</span><span class="s1"> `${center.lat.toFixed(6)}</span><span class="s4">, </span><span class="s1">${center.lng.toFixed(6)}`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">navigator</span><span class="s1">.clipboard) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">navigator</span><span class="s1">.clipboard.</span><span class="s6">writeText</span><span class="s1">(centerText).</span><span class="s6">then</span><span class="s1">(() </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;📋 Center Copied&lt;/strong&gt;&lt;br&gt;</span><span class="s5">${centerText}`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}).</span><span class="s7">catch</span><span class="s1">(() </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;📍 Map Center&lt;/strong&gt;&lt;br&gt;</span><span class="s5">${centerText}`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;📍 Map Center&lt;/strong&gt;&lt;br&gt;</span><span class="s5">${centerText}`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'center-input'</span><span class="s1">).value </span><span class="s6">=</span><span class="s1"> centerText;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">changeMapStyle</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">State.map) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> selectedStyle </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'map-style-select'</span><span class="s1">).value;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🎨 Changing Map Style...&lt;/strong&gt;&lt;br&gt;Loading new style'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">setStyle</span><span class="s1">(selectedStyle);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Re-add custom layers after style loads</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">once</span><span class="s1">(</span><span class="s4">'style.load'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>// Re-add obstacles layer</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>MapManager.</span><span class="s6">setupMapFeatures</span><span class="s1">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>// Re-add all route layers</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.routes.</span><span class="s6">forEach</span><span class="s1">((route, routeId) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>RouteManager.</span><span class="s6">addRouteToMap</span><span class="s1">(routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(routeId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;✅ Map Style Changed&lt;/strong&gt;&lt;br&gt;Style updated successfully'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'mapStyleChanged'</span><span class="s1">, selectedStyle);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// File Management Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> FileManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">exportRoutes</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.routes.size </span><span class="s6">===</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ No Routes&lt;/strong&gt;&lt;br&gt;No routes to export'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">try</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> exportData </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">version</span><span class="s6">:</span><span class="s1"> </span><span class="s4">"1.0"</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">exportDate</span><span class="s6">:</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">Date</span><span class="s1">().</span><span class="s6">toISOString</span><span class="s1">(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">totalRoutes</span><span class="s6">:</span><span class="s1"> State.routes.size,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s2">routes</span><span class="s6">:</span><span class="s1"> State.</span><span class="s6">getAllRoutes</span><span class="s1">().</span><span class="s6">map</span><span class="s1">(route </span><span class="s6">=&gt;</span><span class="s1"> ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> route.id,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">name</span><span class="s6">:</span><span class="s1"> route.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">origin</span><span class="s6">:</span><span class="s1"> route.origin,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">destination</span><span class="s6">:</span><span class="s1"> route.destination,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">waypoints</span><span class="s6">:</span><span class="s1"> route.waypoints,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">profile</span><span class="s6">:</span><span class="s1"> route.profile,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">color</span><span class="s6">:</span><span class="s1"> route.color,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">width</span><span class="s6">:</span><span class="s1"> route.width,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">visible</span><span class="s6">:</span><span class="s1"> route.visible,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">status</span><span class="s6">:</span><span class="s1"> route.status,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s2">routeStats</span><span class="s6">:</span><span class="s1"> route.routeData </span><span class="s6">?</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">duration</span><span class="s6">:</span><span class="s1"> route.routeData.duration,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">distance</span><span class="s6">:</span><span class="s1"> route.routeData.distance</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}))</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> dataStr </span><span class="s6">=</span><span class="s1"> </span><span class="s3">JSON</span><span class="s1">.</span><span class="s6">stringify</span><span class="s1">(exportData, </span><span class="s7">null</span><span class="s1">, </span><span class="s3">2</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> dataBlob </span><span class="s6">=</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">Blob</span><span class="s1">([dataStr], { </span><span class="s2">type</span><span class="s6">:</span><span class="s1"> </span><span class="s4">'application/json'</span><span class="s1"> });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> link </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'a'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>link.href </span><span class="s6">=</span><span class="s1"> </span><span class="s3">URL</span><span class="s1">.</span><span class="s6">createObjectURL</span><span class="s1">(dataBlob);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>link.download </span><span class="s6">=</span><span class="s1"> `</span><span class="s4">routes_export_</span><span class="s1">${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}</span><span class="s4">.json</span><span class="s1">`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">document</span><span class="s1">.body.</span><span class="s6">appendChild</span><span class="s1">(link);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>link.</span><span class="s6">click</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">document</span><span class="s1">.body.</span><span class="s6">removeChild</span><span class="s1">(link);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">URL</span><span class="s1">.</span><span class="s6">revokeObjectURL</span><span class="s1">(link.href);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;📤 Routes Exported&lt;/strong&gt;&lt;br&gt;Downloaded </span><span class="s5">${State.routes.size}</span><span class="s1"> routes successfully</span><span class="s5">`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">catch</span><span class="s1"> (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Export error:'</span><span class="s1">, error);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Export Failed&lt;/strong&gt;&lt;br&gt;Could not export routes'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">triggerImportRoutes</span><span class="s5">() {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'import-file-input'</span><span class="s5">).</span><span class="s1">click</span><span class="s5">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">importRoutes</span><span class="s1">(event) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> file </span><span class="s6">=</span><span class="s1"> event.target.files[</span><span class="s3">0</span><span class="s1">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">file) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">file.name.</span><span class="s6">endsWith</span><span class="s1">(</span><span class="s4">'.json'</span><span class="s1">)) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Invalid File&lt;/strong&gt;&lt;br&gt;Please select a JSON file'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> reader </span><span class="s6">=</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">FileReader</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>reader.onload </span><span class="s6">=</span><span class="s1"> (e) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">try</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">const</span><span class="s1"> importData </span><span class="s6">=</span><span class="s1"> </span><span class="s3">JSON</span><span class="s1">.</span><span class="s6">parse</span><span class="s1">(e.target.result);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">importData.routes </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s3">Array</span><span class="s1">.</span><span class="s6">isArray</span><span class="s1">(importData.routes)) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s7">throw</span><span class="s5"> </span><span class="s7">new</span><span class="s5"> </span><span class="s3">Error</span><span class="s5">(</span><span class="s1">'Invalid route data structure'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;📥 Importing Routes...&lt;/strong&gt;&lt;br&gt;Processing route data'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">if</span><span class="s1"> (State.routes.size </span><span class="s6">&gt;</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> confirmClear </span><span class="s6">=</span><span class="s1"> </span><span class="s6">confirm</span><span class="s1">(`</span><span class="s4">This will replace your current </span><span class="s1">${State.routes.size}</span><span class="s4"> route(s). Continue?</span><span class="s1">`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">confirmClear) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                  </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Import Cancelled&lt;/strong&gt;&lt;br&gt;Existing routes preserved'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s1"><i>// Clear existing routes</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.routes.</span><span class="s6">forEach</span><span class="s1">((route, id) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>[</span><span class="s4">'route'</span><span class="s1">, </span><span class="s4">'waypoints'</span><span class="s1">].</span><span class="s6">forEach</span><span class="s1">(type </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s7">const</span><span class="s1"> layerId </span><span class="s6">=</span><span class="s1"> `${type}</span><span class="s4">-</span><span class="s1">${id}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s7">if</span><span class="s1"> (State.map.</span><span class="s6">getLayer</span><span class="s1">(layerId)) State.map.</span><span class="s6">removeLayer</span><span class="s1">(layerId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s7">if</span><span class="s1"> (State.map.</span><span class="s6">getSource</span><span class="s1">(layerId)) State.map.</span><span class="s6">removeSource</span><span class="s1">(layerId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.routes.</span><span class="s6">clear</span><span class="s1">();</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s1"><i>// Import new routes</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">let</span><span class="s1"> importedCount </span><span class="s6">=</span><span class="s1"> </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">let</span><span class="s1"> maxId </span><span class="s6">=</span><span class="s1"> </span><span class="s3">0</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>importData.routes.</span><span class="s6">forEach</span><span class="s1">(routeData </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> newRoute </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">id</span><span class="s6">:</span><span class="s1"> routeData.id,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">name</span><span class="s6">:</span><span class="s1"> routeData.name </span><span class="s6">||</span><span class="s1"> `</span><span class="s4">Route </span><span class="s1">${routeData.id}`,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">origin</span><span class="s6">:</span><span class="s1"> routeData.origin </span><span class="s6">||</span><span class="s1"> </span><span class="s7">null</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">destination</span><span class="s6">:</span><span class="s1"> routeData.destination </span><span class="s6">||</span><span class="s1"> </span><span class="s7">null</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">waypoints</span><span class="s6">:</span><span class="s1"> routeData.waypoints </span><span class="s6">||</span><span class="s1"> [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">profile</span><span class="s6">:</span><span class="s1"> routeData.profile </span><span class="s6">||</span><span class="s1"> </span><span class="s4">'driving'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">color</span><span class="s6">:</span><span class="s1"> routeData.color </span><span class="s6">||</span><span class="s1"> Config.routes.colors[routeData.id </span><span class="s6">%</span><span class="s1"> Config.routes.colors.length],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">width</span><span class="s6">:</span><span class="s1"> routeData.width </span><span class="s6">||</span><span class="s1"> </span><span class="s3">8</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">visible</span><span class="s6">:</span><span class="s1"> routeData.visible </span><span class="s6">!==</span><span class="s1"> </span><span class="s7">undefined</span><span class="s1"> </span><span class="s6">?</span><span class="s1"> routeData.visible </span><span class="s6">:</span><span class="s1"> </span><span class="s3">true</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">status</span><span class="s6">:</span><span class="s1"> routeData.status </span><span class="s6">||</span><span class="s1"> </span><span class="s4">'empty'</span><span class="s1">,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s2">routeData</span><span class="s6">:</span><span class="s1"> </span><span class="s7">null</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>State.routes.</span><span class="s6">set</span><span class="s1">(newRoute.id, newRoute);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>RouteManager.</span><span class="s6">addRouteToMap</span><span class="s1">(newRoute.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>maxId </span><span class="s6">=</span><span class="s1"> </span><span class="s3">Math</span><span class="s1">.</span><span class="s6">max</span><span class="s1">(maxId, newRoute.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>importedCount</span><span class="s6">++</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.nextRouteId </span><span class="s6">=</span><span class="s1"> maxId </span><span class="s6">+</span><span class="s1"> </span><span class="s3">1</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">if</span><span class="s1"> (State.routes.size </span><span class="s6">&gt;</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">const</span><span class="s1"> firstRouteId </span><span class="s6">=</span><span class="s1"> </span><span class="s3">Array</span><span class="s1">.</span><span class="s7">from</span><span class="s1">(State.routes.</span><span class="s6">keys</span><span class="s1">())[</span><span class="s3">0</span><span class="s1">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>RouteManager.</span><span class="s6">switchToRoute</span><span class="s1">(firstRouteId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'routesImported'</span><span class="s1">, importedCount);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">const</span><span class="s1"> importInfo </span><span class="s6">=</span><span class="s1"> importData.exportDate </span><span class="s6">?</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s4">&lt;br&gt;From: </span><span class="s1">${new Date(importData.exportDate).toLocaleDateString()}` </span><span class="s6">:</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(`</span><span class="s1">&lt;strong&gt;📥 Import Complete&lt;/strong&gt;&lt;br&gt;Imported </span><span class="s5">${importedCount}</span><span class="s1"> routes</span><span class="s5">${importInfo}`, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s7">catch</span><span class="s1"> (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Import error:'</span><span class="s1">, error);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Import Failed&lt;/strong&gt;&lt;br&gt;Invalid or corrupted file'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>reader.onerror </span><span class="s6">=</span><span class="s1"> () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ File Read Error&lt;/strong&gt;&lt;br&gt;Could not read the file'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>reader.</span><span class="s6">readAsText</span><span class="s1">(file);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>event.target.value </span><span class="s6">=</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// UI Management Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> UIManager </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">init</span><span class="s1">() {</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s5">.</span><span class="s1">setupEventListeners</span><span class="s5">();</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">this</span><span class="s5">.</span><span class="s1">setupCollapsibleSections</span><span class="s5">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">setupEventListeners</span><span class="s5">() {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Route events</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'routeCreated'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteTabs</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'routeDeleted'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteTabs</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'routesUpdated'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteList</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'routeSwitched'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteTabs</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'waypointsUpdated'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateWaypointsList</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'waypointAdded'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateWaypointsList</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'waypointRemoved'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateWaypointsList</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'mapLoaded'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">showApplicationUI</span><span class="s1">());</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'routesImported'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteTabs</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">updateRouteList</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">setupCollapsibleSections</span><span class="s5">() {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1"><i>// Initialize all sections as expanded</i><i></i></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s5"> sections </span><span class="s6">=</span><span class="s5"> [</span><span class="s1">'route-management'</span><span class="s5">, </span><span class="s1">'current-route'</span><span class="s5">, </span><span class="s1">'map-controls'</span><span class="s5">];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>sections.</span><span class="s6">forEach</span><span class="s1">(sectionId </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> header </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">querySelector</span><span class="s1">(`</span><span class="s4">#</span><span class="s1">${sectionId}</span><span class="s4"> .card-header</span><span class="s1">`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> content </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">querySelector</span><span class="s1">(`</span><span class="s4">#</span><span class="s1">${sectionId}</span><span class="s4">-content</span><span class="s1">`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (header </span><span class="s6">&amp;&amp;</span><span class="s1"> content) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>header.</span><span class="s6">setAttribute</span><span class="s1">(</span><span class="s4">'data-section'</span><span class="s1">, sectionId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">toggleSection</span><span class="s1">(sectionId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> header </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">querySelector</span><span class="s1">(`</span><span class="s4">[data-section="</span><span class="s1">${sectionId}</span><span class="s4">"]</span><span class="s1">`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> content </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(`${sectionId}</span><span class="s4">-content</span><span class="s1">`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> chevron </span><span class="s6">=</span><span class="s1"> header</span><span class="s6">?.querySelector</span><span class="s1">(</span><span class="s4">'.chevron'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">header </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">content </span><span class="s6">||</span><span class="s1"> </span><span class="s6">!</span><span class="s1">chevron) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> isCollapsed </span><span class="s6">=</span><span class="s1"> State.collapsedSections.</span><span class="s6">has</span><span class="s1">(sectionId);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (isCollapsed) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8"><i>// Expand</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.collapsedSections.</span><span class="s6">delete</span><span class="s1">(sectionId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>header.classList.</span><span class="s6">remove</span><span class="s1">(</span><span class="s4">'collapsed'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>content.classList.</span><span class="s6">remove</span><span class="s1">(</span><span class="s4">'collapsed'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>chevron.textContent </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'▽'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8"><i>// Collapse</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.collapsedSections.</span><span class="s6">add</span><span class="s1">(sectionId);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>header.classList.</span><span class="s6">add</span><span class="s1">(</span><span class="s4">'collapsed'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>content.classList.</span><span class="s6">add</span><span class="s1">(</span><span class="s4">'collapsed'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>chevron.textContent </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'▷'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">showApplicationUI</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'init-controls'</span><span class="s1">).style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'none'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-management'</span><span class="s1">).style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'current-route-panel'</span><span class="s1">).style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'map-controls'</span><span class="s1">).style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">updateRouteTabs</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> tabsContainer </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-tabs'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>tabsContainer.innerHTML </span><span class="s6">=</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.routes.</span><span class="s6">forEach</span><span class="s1">((route, id) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> tab </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>tab.className </span><span class="s6">=</span><span class="s1"> `</span><span class="s4">route-tab </span><span class="s1">${id === State.currentRouteId ? 'active' : ''}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>tab.innerHTML </span><span class="s6">=</span><span class="s1"> `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="color-indicator" style="background-color: ${route.color}"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;span&gt;${route.name}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;button class="close-btn" onclick="event.stopPropagation(); RouteFinderApp.routes.deleteRoute(${id})" title="Delete route"&gt;×&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>tab.onclick </span><span class="s6">=</span><span class="s1"> () </span><span class="s6">=&gt;</span><span class="s1"> RouteManager.</span><span class="s6">switchToRoute</span><span class="s1">(id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>tabsContainer.</span><span class="s6">appendChild</span><span class="s1">(tab);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> toggleBtn </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-list-toggle'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.routes.size </span><span class="s6">&gt;</span><span class="s1"> </span><span class="s3">1</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>toggleBtn.style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>toggleBtn.style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'none'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-list'</span><span class="s1">).style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'none'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.routeListVisible </span><span class="s6">=</span><span class="s1"> </span><span class="s3">false</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">updateRouteList</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> listContainer </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-list'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>listContainer.innerHTML </span><span class="s6">=</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.routes.</span><span class="s6">forEach</span><span class="s1">((route, id) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> item </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>item.className </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'route-list-item'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> statusText </span><span class="s6">=</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">getRouteStatusText</span><span class="s1">(route);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>item.innerHTML </span><span class="s6">=</span><span class="s1"> `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="color-indicator" style="background-color: ${route.color}; width: 16px; height: 16px; margin-right: 10px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.2);"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="route-info"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="route-name"&gt;${route.name}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="route-status"&gt;${statusText}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="route-controls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button class="visibility-btn ${route.visible ? '' : 'hidden'}" onclick="RouteFinderApp.routes.toggleRouteVisibility(${id})" title="Toggle visibility"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                  </span>${route.visible ? '◉' : '○'}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button class="btn btn-small" onclick="RouteFinderApp.routes.switchToRoute(${id})" title="Edit route"&gt;✎&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button class="btn btn-small" onclick="RouteFinderApp.routes.deleteRoute(${id})" title="Delete route"&gt;✕&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>listContainer.</span><span class="s6">appendChild</span><span class="s1">(item);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">updateWaypointsList</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> waypointsList </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'waypoint-list'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (route.waypoints.length </span><span class="s6">===</span><span class="s1"> </span><span class="s3">0</span><span class="s1">) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>waypointsList.style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'none'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>waypointsList.style.display </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>waypointsList.innerHTML </span><span class="s6">=</span><span class="s1"> </span><span class="s4">''</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>route.waypoints.</span><span class="s6">forEach</span><span class="s1">((waypoint, index) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> item </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'div'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>item.className </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'waypoint-item'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>item.innerHTML </span><span class="s6">=</span><span class="s1"> `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="waypoint-number"&gt;${index + 1}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="waypoint-text"&gt;${Utils.formatCoordinates(waypoint)}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;div class="waypoint-controls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button class="btn btn-secondary btn-small" onclick="RouteFinderApp.waypoints.removeWaypoint(${index})" title="Remove waypoint"&gt;✕&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>waypointsList.</span><span class="s6">appendChild</span><span class="s1">(item);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">getRouteStatusText</span><span class="s5">(route) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route.origin </span><span class="s6">&amp;&amp;</span><span class="s1"> </span><span class="s6">!</span><span class="s1">route.destination) </span><span class="s7">return</span><span class="s1"> </span><span class="s4">'Empty route'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route.origin) </span><span class="s7">return</span><span class="s1"> </span><span class="s4">'Missing origin'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route.destination) </span><span class="s7">return</span><span class="s1"> </span><span class="s4">'Missing destination'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (route.routeData) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> duration </span><span class="s6">=</span><span class="s1"> </span><span class="s3">Math</span><span class="s1">.</span><span class="s6">round</span><span class="s1">(route.routeData.duration </span><span class="s6">/</span><span class="s1"> </span><span class="s3">60</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> distance </span><span class="s6">=</span><span class="s1"> (route.routeData.distance </span><span class="s6">/</span><span class="s1"> </span><span class="s3">1000</span><span class="s1">).</span><span class="s6">toFixed</span><span class="s1">(</span><span class="s3">1</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1"> `${duration}</span><span class="s4"> min, </span><span class="s1">${distance}</span><span class="s4"> km</span><span class="s1">`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s5"> </span><span class="s1">'Ready to calculate'</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">toggleSidebar</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> sidebar </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'sidebar'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> toggleBtn </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'toggle-btn'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>sidebar.classList.</span><span class="s6">toggle</span><span class="s1">(</span><span class="s4">'hidden'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (sidebar.classList.</span><span class="s6">contains</span><span class="s1">(</span><span class="s4">'hidden'</span><span class="s1">)) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>toggleBtn.classList.</span><span class="s6">remove</span><span class="s1">(</span><span class="s4">'sidebar-visible'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>toggleBtn.classList.</span><span class="s6">add</span><span class="s1">(</span><span class="s4">'sidebar-hidden'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>toggleBtn.classList.</span><span class="s6">remove</span><span class="s1">(</span><span class="s4">'sidebar-hidden'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>toggleBtn.classList.</span><span class="s6">add</span><span class="s1">(</span><span class="s4">'sidebar-visible'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">toggleRouteList</span><span class="s5">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> listContainer </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-list'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> toggleBtn </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">getElementById</span><span class="s1">(</span><span class="s4">'route-list-toggle'</span><span class="s1">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.routeListVisible </span><span class="s6">=</span><span class="s1"> </span><span class="s6">!</span><span class="s1">State.routeListVisible;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>listContainer.style.display </span><span class="s6">=</span><span class="s1"> State.routeListVisible </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'block'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'none'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>toggleBtn.textContent </span><span class="s6">=</span><span class="s1"> State.routeListVisible </span><span class="s6">?</span><span class="s1"> </span><span class="s4">'⋯ Hide Routes'</span><span class="s1"> </span><span class="s6">:</span><span class="s1"> </span><span class="s4">'⋯ Show All Routes'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Library Loader Module</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> LibraryLoader </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">async</span><span class="s1"> </span><span class="s6">loadLibraries</span><span class="s1">() {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;📥 Loading Libraries...&lt;/strong&gt;&lt;br&gt;Downloading Mapbox GL and Turf.js...'</span><span class="s5">, </span><span class="s1">'loading'</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">try</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">await</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">loadMapboxGL</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">await</span><span class="s1"> </span><span class="s7">this</span><span class="s1">.</span><span class="s6">loadTurf</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1"> </span><span class="s3">true</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">catch</span><span class="s1"> (error) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Failed to Load&lt;/strong&gt;&lt;br&gt;Could not load required libraries'</span><span class="s5">, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1"> </span><span class="s3">false</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">loadMapboxGL</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">Promise</span><span class="s1">((resolve, reject) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> script </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'script'</span><span class="s1">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>script.src </span><span class="s6">=</span><span class="s5"> </span><span class="s1">'https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>script.crossOrigin </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'anonymous'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>script.onload </span><span class="s6">=</span><span class="s1"> () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s7">const</span><span class="s1"> css </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'link'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>css.rel </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'stylesheet'</span><span class="s1">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span>css.href </span><span class="s6">=</span><span class="s5"> </span><span class="s1">'https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css'</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>css.crossOrigin </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'anonymous'</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">document</span><span class="s1">.head.</span><span class="s6">appendChild</span><span class="s1">(css);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">              </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.librariesLoaded.mapbox </span><span class="s6">=</span><span class="s1"> </span><span class="s3">true</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">log</span><span class="s1">(</span><span class="s4">'Mapbox GL loaded'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">resolve</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>script.onerror </span><span class="s6">=</span><span class="s1"> reject;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">document</span><span class="s1">.head.</span><span class="s6">appendChild</span><span class="s1">(script);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">loadTurf</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">return</span><span class="s1"> </span><span class="s7">new</span><span class="s1"> </span><span class="s3">Promise</span><span class="s1">((resolve, reject) </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> script </span><span class="s6">=</span><span class="s1"> </span><span class="s6">document</span><span class="s1">.</span><span class="s6">createElement</span><span class="s1">(</span><span class="s4">'script'</span><span class="s1">);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>script.src </span><span class="s6">=</span><span class="s5"> </span><span class="s1">'https://unpkg.com/@turf/turf@6/turf.min.js'</span><span class="s5">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>script.crossOrigin </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'anonymous'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>script.onload </span><span class="s6">=</span><span class="s1"> () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>State.librariesLoaded.turf </span><span class="s6">=</span><span class="s1"> </span><span class="s3">true</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">log</span><span class="s1">(</span><span class="s4">'Turf.js loaded'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">resolve</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>script.onerror </span><span class="s6">=</span><span class="s1"> reject;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s6">document</span><span class="s1">.head.</span><span class="s6">appendChild</span><span class="s1">(script);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Map Click Handler</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> MapClickHandler </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">init</span><span class="s1">() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'mapLoaded'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'mapClicked'</span><span class="s1">, </span><span class="s7">this</span><span class="s1">.</span><span class="s6">handleMapClick</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(</span><span class="s7">this</span><span class="s1">));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">handleMapClick</span><span class="s5">(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">State.appInitialized) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> coords </span><span class="s6">=</span><span class="s1"> [e.lngLat.lng, e.lngLat.lat];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.interactions.settingMapCenter) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">this</span><span class="s1">.</span><span class="s6">handleCenterMapClick</span><span class="s1">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.interactions.addingWaypoint) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>WaypointManager.</span><span class="s6">addWaypointAtCoordinates</span><span class="s1">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s1"> route </span><span class="s6">=</span><span class="s1"> State.</span><span class="s6">getCurrentRoute</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">route) </span><span class="s7">return</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">if</span><span class="s1"> (State.interactions.settingOrigin) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>route.origin </span><span class="s6">=</span><span class="s1"> coords;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'origin-input'</span><span class="s5">).value </span><span class="s1">=</span><span class="s5"> Utils.</span><span class="s1">formatCoordinates</span><span class="s5">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.interactions.settingOrigin </span><span class="s6">=</span><span class="s1"> </span><span class="s3">false</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;✅ Origin Set&lt;/strong&gt;&lt;br&gt;Click on map to set destination'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">else</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>route.destination </span><span class="s6">=</span><span class="s1"> coords;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'destination-input'</span><span class="s5">).value </span><span class="s1">=</span><span class="s5"> Utils.</span><span class="s1">formatCoordinates</span><span class="s5">(coords);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>State.interactions.settingOrigin </span><span class="s6">=</span><span class="s1"> </span><span class="s3">true</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>RouteManager.</span><span class="s6">updateRouteOnMap</span><span class="s1">(State.currentRouteId);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;✅ Destination Set&lt;/strong&gt;&lt;br&gt;Ready to find route'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem.</span><span class="s6">emit</span><span class="s1">(</span><span class="s4">'waypointsUpdated'</span><span class="s1">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">handleCenterMapClick</span><span class="s5">(coords) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.map.</span><span class="s6">flyTo</span><span class="s1">({ </span><span class="s2">center</span><span class="s6">:</span><span class="s1"> coords, </span><span class="s2">duration</span><span class="s6">:</span><span class="s1"> </span><span class="s3">1500</span><span class="s1"> });</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'center-input'</span><span class="s5">).value </span><span class="s1">=</span><span class="s5"> Utils.</span><span class="s1">formatCoordinates</span><span class="s5">(coords, </span><span class="s3">6</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State.interactions.settingMapCenter </span><span class="s6">=</span><span class="s1"> </span><span class="s3">false</span><span class="s1">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s7">const</span><span class="s5"> btn </span><span class="s1">=</span><span class="s5"> </span><span class="s1">document</span><span class="s5">.</span><span class="s1">getElementById</span><span class="s5">(</span><span class="s4">'center-mode-btn'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>btn.textContent </span><span class="s6">=</span><span class="s1"> </span><span class="s4">'📍 Click Map'</span><span class="s1">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;📍 Map Centered&lt;/strong&gt;&lt;br&gt;Map centered on clicked location'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Main Application Initialization</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">const</span><span class="s1"> App </span><span class="s6">=</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">async</span><span class="s1"> </span><span class="s6">init</span><span class="s1">() {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">          </span></span><span class="s3">console</span><span class="s5">.</span><span class="s6">log</span><span class="s5">(</span><span class="s1">'=== Multi-Route Mapper Starting ==='</span><span class="s5">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s7">try</span><span class="s1"> {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>// Load required libraries</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">const</span><span class="s1"> librariesLoaded </span><span class="s6">=</span><span class="s1"> </span><span class="s7">await</span><span class="s1"> LibraryLoader.</span><span class="s6">loadLibraries</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">if</span><span class="s1"> (</span><span class="s6">!</span><span class="s1">librariesLoaded) {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s7">throw</span><span class="s5"> </span><span class="s7">new</span><span class="s5"> </span><span class="s3">Error</span><span class="s5">(</span><span class="s1">'Failed to load required libraries'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>// Initialize UI event system</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>UIManager.</span><span class="s6">init</span><span class="s1">();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>MapClickHandler.</span><span class="s6">init</span><span class="s1">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>// Initialize map</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>MapManager.</span><span class="s6">init</span><span class="s1">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1"><i>// Set up completion handler</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>EventSystem.</span><span class="s6">on</span><span class="s1">(</span><span class="s4">'mapLoaded'</span><span class="s1">, () </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s6">setTimeout</span><span class="s1">(() </span><span class="s6">=&gt;</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>RouteManager.</span><span class="s6">createNewRoute</span><span class="s1">();</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">                </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;🎉 Ready!&lt;/strong&gt;&lt;br&gt;Multi-route mapper is ready to use'</span><span class="s5">, </span><span class="s1">'success'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>State.appInitialized </span><span class="s6">=</span><span class="s1"> </span><span class="s3">true</span><span class="s1">;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">              </span>}, Config.timing.mapLoadDelay);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>} </span><span class="s7">catch</span><span class="s1"> (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">console</span><span class="s1">.</span><span class="s6">error</span><span class="s1">(</span><span class="s4">'Initialization error:'</span><span class="s1">, error);</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span>Utils.</span><span class="s6">updateStatus</span><span class="s5">(</span><span class="s1">'&lt;strong&gt;❌ Initialization Failed&lt;/strong&gt;&lt;br&gt;'</span><span class="s5"> </span><span class="s6">+</span><span class="s5"> error.message, </span><span class="s1">'error'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1"><i>// Public API - Expose modules for HTML onclick handlers</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s7">return</span><span class="s1"> {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Core initialization</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">init</span><span class="s6">:</span><span class="s1"> App.init,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Module access for HTML onclick handlers</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">routes</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">createNewRoute</span><span class="s6">:</span><span class="s1"> RouteManager.</span><span class="s6">createNewRoute</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RouteManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">deleteRoute</span><span class="s6">:</span><span class="s1"> RouteManager.</span><span class="s6">deleteRoute</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RouteManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">switchToRoute</span><span class="s6">:</span><span class="s1"> RouteManager.</span><span class="s6">switchToRoute</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RouteManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">clearCurrentRoute</span><span class="s6">:</span><span class="s1"> RouteManager.</span><span class="s6">clearCurrentRoute</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RouteManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">updateCurrentRouteStyle</span><span class="s6">:</span><span class="s1"> RouteManager.</span><span class="s6">updateCurrentRouteStyle</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RouteManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleRouteVisibility</span><span class="s6">:</span><span class="s1"> RouteManager.</span><span class="s6">toggleRouteVisibility</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RouteManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">geocoding</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">geocodeOrigin</span><span class="s6">:</span><span class="s1"> GeocodingManager.</span><span class="s6">geocodeOrigin</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(GeocodingManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">geocodeDestination</span><span class="s6">:</span><span class="s1"> GeocodingManager.</span><span class="s6">geocodeDestination</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(GeocodingManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">waypoints</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">addWaypoint</span><span class="s6">:</span><span class="s1"> WaypointManager.</span><span class="s6">addWaypoint</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(WaypointManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">removeWaypoint</span><span class="s6">:</span><span class="s1"> WaypointManager.</span><span class="s6">removeWaypoint</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(WaypointManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleWaypointMode</span><span class="s6">:</span><span class="s1"> WaypointManager.</span><span class="s6">toggleWaypointMode</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(WaypointManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">routing</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">findRoute</span><span class="s6">:</span><span class="s1"> RoutingManager.</span><span class="s6">findRoute</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(RoutingManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">mapControls</span><span class="s6">:</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">zoomIn</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">zoomIn</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">zoomOut</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">zoomOut</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">fitToData</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">fitToData</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleCrosshair</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">toggleCrosshair</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">centerMapOnLocation</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">centerMapOnLocation</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleCenterMode</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">toggleCenterMode</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">getCurrentCenter</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">getCurrentCenter</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">changeMapStyle</span><span class="s6">:</span><span class="s1"> MapControlsManager.</span><span class="s6">changeMapStyle</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(MapControlsManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">fileManager</span><span class="s6">:</span><span class="s5"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">exportRoutes</span><span class="s6">:</span><span class="s1"> FileManager.</span><span class="s6">exportRoutes</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(FileManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">triggerImportRoutes</span><span class="s6">:</span><span class="s1"> FileManager.</span><span class="s6">triggerImportRoutes</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(FileManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">importRoutes</span><span class="s6">:</span><span class="s1"> FileManager.</span><span class="s6">importRoutes</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(FileManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">ui</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleSidebar</span><span class="s6">:</span><span class="s1"> UIManager.</span><span class="s6">toggleSidebar</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(UIManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleRouteList</span><span class="s6">:</span><span class="s1"> UIManager.</span><span class="s6">toggleRouteList</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(UIManager),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s2">toggleSection</span><span class="s6">:</span><span class="s1"> UIManager.</span><span class="s6">toggleSection</span><span class="s1">.</span><span class="s6">bind</span><span class="s1">(UIManager)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1"><i>// Development/debugging access</i><i></i></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s2">_internal</span><span class="s6">:</span><span class="s1"> {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>Config,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>State,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>EventSystem,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>Utils</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>})();</span></p>
<p class="p4"><span class="s1"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1"><i>// Initialize when page loads</i><i></i></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">window</span><span class="s5">.</span><span class="s1">addEventListener</span><span class="s5">(</span><span class="s4">'load'</span><span class="s5">, </span><span class="s7">function</span><span class="s5">() {</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">console</span><span class="s5">.</span><span class="s6">log</span><span class="s5">(</span><span class="s1">'Page loaded, ready for initialization'</span><span class="s5">);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span>&lt;/</span><span class="s1">script</span><span class="s5">&gt;</span></p>
<p class="p2"><span class="s5">&lt;/</span><span class="s1">body</span><span class="s5">&gt;</span></p>
<p class="p2"><span class="s5">&lt;/</span><span class="s1">html</span><span class="s5">&gt;</span></p>
</body>
</html>
